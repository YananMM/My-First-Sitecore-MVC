@using Landmark.Classes
@using Landmark.Helper
@using Sitecore.Data.Items
@using Sitecore.Data.Managers
@using Sitecore.Globalization
@model RenderingModel
@{
    var languages = LandmarkHelper.GetLanguages();
    int i = 1;
}
<script>
  var DataLayer = { 
    /* page level data, populate value when applicable */ 
      'shop_name': '@AdobeTrackingDataLayerHelper.GetShopName()',
      'building_name': '@AdobeTrackingDataLayerHelper.GetBuildingName()', 
      'restaurant_name': '@AdobeTrackingDataLayerHelper.GetRestaurantName()', 
      'article_title': '@AdobeTrackingDataLayerHelper.GetArticleTitle()', 
      'language': '',
      'pageName': '@AdobeTrackingDataLayerHelper.GetPageName()'
  }
</script>
<header class="site-header">
    <!-- desktop -->
    <div class="container hidden-sm  hidden-xs">
        <div class="language ">
            <div class="header-social-wrapper">
                <a href="" class="icomoon-share"></a>
                <div class="header-social">
                    <a href="" class="icomoon-facebook"></a>
                    <a href="" class="icomoon-twitter"></a>
                    <a href="" class="icomoon-sina-weibo"></a>
                    <a href='@SitecoreItems.LandmarkConfigItem.Fields["Share Email To"].Value' class="icomoon-envelop"></a>
                </div>
            </div>
            @foreach (var lan in languages)
            {
                if (SitecoreItems.LanguageFolderGuidItem!= null && SitecoreItems.LanguageFolderGuidItem.Children.Count != 0)
                {
                    foreach (Item languageText in SitecoreItems.LanguageFolderGuidItem.Children)
                    {
                        if (languageText.DisplayName == lan.Name)
                        {
                            <a href="@LandmarkHelper.GetUrlByLanguage(Model.PageItem, @lan.Name)" class="lang-cn">@Html.Sitecore().Field("Value", languageText)</a>
                        }
                    }
                }
                if (i != languages.Count())
                {
                    @Html.Raw(" | ")
                }
                i ++;
            }
            
            <div class="sb-search">
                @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName, FormMethod.Post))
                {
                    @Html.Sitecore().FormHandler("Search", "SearchContent")
                    <input type="search" id="search" name="search" placeholder="@Html.Sitecore().Field("Glossary Value", SitecoreItems.SearchPlaceHolderItem)" class="sb-search-input form-control">
                    <input class="sb-search-submit" type="submit" value="">
                    <a class="sb-search-clear icomoon-circle-with-cross" href="javascript:;"></a>
                    <span class="icomoon-search"></span>
                }
            </div>
        </div>
        @Html.Sitecore().Rendering(SitecoreRenderingViewGuids.NavigationRenderingViewGuid)
    </div>

    <!--mobile menu-->

    <div class="container visible-xs-block  visible-sm-block">
        <nav class="clearfix">
            <a class="lines-button pull-left" type="button" role="button" aria-label="Navigation">
            <span class="lines"></span>
            </a>
            <div class="sb-search">
                @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName, FormMethod.Post))
                {
                    @Html.Sitecore().FormHandler("Search", "SearchContent")
                    <input type="search" id="search" name="search" placeholder="@Html.Sitecore().Field("Glossary Value", SitecoreItems.SearchPlaceHolderItem)" class="sb-search-input form-control">
                    <input class="sb-search-submit" type="submit" value="">
                    <a class="sb-search-clear icomoon-circle-with-cross" href="javascript:;"></a>
                    <span class="icomoon-search"></span>
                }
            </div>

            <div class="mobile-menu">
                <div class="scroll-content">
                    @Html.Sitecore().Rendering(SitecoreRenderingViewGuids.MobileNavigationRenderingViewGuid)

                    <div class="language">
                        @foreach (var lan in languages)
                        {
                            if (SitecoreItems.LanguageFolderGuidItem != null && SitecoreItems.LanguageFolderGuidItem.Children.Count != 0)
                            {
                                foreach (Item languageText in SitecoreItems.LanguageFolderGuidItem.Children)
                                {
                                    if (languageText.DisplayName == lan.Name)
                                    {
                                        <a href="@LandmarkHelper.GetUrlByLanguage(Model.PageItem, @lan.Name)" class="lang-cn">@Html.Sitecore().Field("Value", languageText)</a>
                                    }
                                }
                            }
                            if (i != languages.Count())
                            {
                                <span class="gap">|</span>
                            }
                            i++;
                        }
                    </div>
                </div>
            </div>
            <h1>
                <a href="@Sitecore.Links.LinkManager.GetItemUrl(SitecoreItems.LandmarkHomeItem)">
                    <img class="responsive-logo" src="@Html.Sitecore().ImageFieldSrc("Landmark Logo",SitecoreItems.LandmarkConfigItem)" alt="landmark">
                </a>
            </h1>
        </nav>
    </div>
</header>
