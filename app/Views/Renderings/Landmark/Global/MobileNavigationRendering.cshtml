@using Landmark.Classes
@using Landmark.Helper
@using Sitecore.Collections
@using Sitecore.Data.Items
@model RenderingModel
@{
    ShoppingHelper shoppingHelper = new ShoppingHelper();
    List<Item> mediaItems = Sitecore.Context.Database.GetItem(ItemGuids.FooterSocialMediaFolderItem).Children.ToList();
}

<ul>
    @foreach (Item item in LandmarkHelper.GetChildrenPageInNavigation(SitecoreItems.LandmarkHomeItem))
    {

        <li><a href="@LandmarkHelper.GetItemUrl(item)">@item.Fields["Page Title"].Value.ToUpper()<span class="sprite-icon-down pull-right"></span></a>
            @if (LandmarkHelper.GetChildrenPageInNavigation(item).Count > 0)
            {
                if (item.ID.ToString().Equals(ItemGuids.ShoppingItem))
                {
                    <ul class="sub-menu">
                        <li>
                            <a href="#">@Html.Sitecore().Field("Glossary Value", SitecoreItems.ByCategoryGuidItem)<span class="sprite-icon-down pull-right"></span></a>
                            <ul class="sub-sub-menu">
                                @foreach (Item itemcategory in shoppingHelper.GetFirstCategoryItems())
                                {
                                    <li><a href="@LandmarkHelper.TranslateUrl(Sitecore.Links.LinkManager.GetItemUrl(itemcategory))">@itemcategory["Page Title"].ToUpper()</a></li>
                                }
                            </ul>
                        </li>
                        <li>
                            <a href="#">@Html.Sitecore().Field("Glossary Value", SitecoreItems.ByBrandsGuidItem)<span class="sprite-icon-down pull-right"></span></a>
                            <ul class="sub-sub-menu menu-brands">
                                @Html.Sitecore().Rendering(SitecoreRenderingViewGuids.ByBrandsRenderingViewGuid)
                            </ul>
                        </li>
                        <li>
                            <a href="#">@Html.Sitecore().Field("Glossary Value", SitecoreItems.ByBuidingsGuidItem)<span class="sprite-icon-down pull-right"></span></a>
                            @{
                                List<Item> buidings = LandmarkHelper.GetBuildings();
                                Item allByBuildings = Sitecore.Context.Database.GetItem(ItemGuids.AllByBuildingsPage);
                            }
                            <ul class="sub-sub-menu">
                                @foreach (Item building in buidings)
                                {
                                    string href = LandmarkHelper.TranslateUrl(Sitecore.Links.LinkManager.GetItemUrl(allByBuildings)) + "#" + building.Fields["Building Title"].Value.Replace(' ', '-');
                                    <li><a href="@href">@building.Fields["Building Title"].Value</a></li>
                                }
                            </ul>
                        </li>
                    </ul>
                }
                else
                {
                    <ul class="sub-menu">
                        @foreach (Item childItem in LandmarkHelper.GetChildrenPageInNavigation(item))
                        {
                            <li><a href="@LandmarkHelper.TranslateUrl(Sitecore.Links.LinkManager.GetItemUrl(childItem))">@childItem.Fields["Page Title"].Value.ToUpper()</a></li>
                        }
                    </ul>
                }

            }

        </li>
    }
</ul>

<div class="mobile-share">
          @Html.Sitecore().Field("Glossary Value",SitecoreItems.ShareItem)
            <a href="" class="icomoon-facebook"></a>
            <a href="" class="icomoon-twitter"></a>
            <a href="" class="icomoon-sina-weibo"></a>
        </div>