@using Landmark.Classes
@using Landmark.Helper
@using Sitecore.Data.Fields
@using Sitecore.Data.Items
@using Landmark.Models
@model RenderingModel
@{
    var currentItem = Sitecore.Context.Item;
    MagezineHelper helper = new MagezineHelper();
    var setting = helper.GetStorySetting(currentItem);
    DateField storyDate = currentItem.Fields["Article Date"];
    var date = LandmarkHelper.ToValidDateTime(storyDate);
    var children = currentItem.Children.ToList();
    CheckboxField inMiddel = currentItem.Fields["Block Text In Middle"];
}
<div class="container">
    <div class="gd-pagetitle">
        @Html.Sitecore().Placeholder("t23-pagetitle")
    </div>

    <div class="gd-content-details">
        <h3>@Html.Sitecore().Field("Article Headline")</h3>
        <h5>@date.ToString("MMM yyyy", System.Globalization.CultureInfo.InvariantCulture)</h5>
        <h6>@Html.Sitecore().Field("Article Sub Headline")</h6>
    </div>
</div>

<div id="gd-carousel-mainimage" class="carousel slide gd-carousel-info gd-mainimage gd-mainimage-withdes" data-ride="carousel">
    @Html.Sitecore().Placeholder("t23-slides")
</div>
<div class="container">
    @using (Html.EditFrame(currentItem.Paths.FullPath))
    {
        foreach (var item in children)
        {
            if (item.TemplateID.ToString() == ItemGuids.MultipleVisualBlocksTemplate)
            {
                int i = 1;
                foreach (var block in item.Children.ToList())
                {
                    <div class="gd-styor-block">
                        <div class="gd-brief">
                            <div class="gd-brief-heading">
                                <h3>@Html.Sitecore().Field("Title", block)</h3>
                            </div>
                            <div class="gd-brief-body text-center">
                                <div class="row">
                                    <div class="col-md-10 col-md-offset-1">
                                        @Html.Sitecore().Field("Content", block)
                                    </div>
                                </div>
                            </div>
                        </div>
                        @{
                    FileField video = block.Fields["Video"];
                    if (video.MediaItem != null)
                    {
                        <div class="gd-bigpicture">
                            <video class="gd-video" type="video/mp4" src="@Html.Sitecore().Field("Video", block)" width="100%" controls poster="@Html.Sitecore().ImageFieldSrc("Cover Image", block)"></video>
                        </div>
                        if (i == item.Children.Count)
                        {
                        <div class="gd-nd-slider-text">@Html.Sitecore().Field("Block Text", currentItem)</div>
                        <dl class="gd-content-details-tags">
                            <dt> <span class="icomoon-price-tag"></span> @Html.Sitecore().Field("Glossary Value", ItemGuids.TagsItem):</dt>
                            <dd>
                                @Html.Sitecore().Rendering(ItemGuids.TagsRenderingViewGuid, new
                                        {
                                            Cacheable = false,
                                            CacheKey = "tags",
                                            Cache_VaryByData = true
                                        })
                            </dd>
                        </dl>
                        }
                    }
                    else
                    {
                        if (inMiddel.Checked)
                        {
                        <div class="gd-bigpicture">
                            <div class="gd-content-auto-width">
                                <img data-src="@Html.Sitecore().ImageFieldSrc("Cover Image", block)">
                                @if (i == item.Children.Count)
                                    {
                                <div class="gd-nd-slider-text">@Html.Sitecore().Field("Block Text", currentItem)</div>
                                <dl class="gd-content-details-tags">
                                    <dt> <span class="icomoon-price-tag"></span> @Html.Sitecore().Field("Glossary Value", ItemGuids.TagsItem):</dt>
                                    <dd>
                                        @Html.Sitecore().Rendering(ItemGuids.TagsRenderingViewGuid, new
                                                {
                                                    Cacheable = false,
                                                    CacheKey = "tags",
                                                    Cache_VaryByData = true
                                                })
                                    </dd>
                                </dl>
                                    }
                            </div>
                        </div>
                        }
                        else
                        {
                        <div class="gd-bigpicture">
                            <img data-src="@Html.Sitecore().ImageFieldSrc("Cover Image", block)">
                        </div>
                            if (i == item.Children.Count)
                            {
                        <div class="gd-nd-slider-text">@Html.Sitecore().Field("Block Text", currentItem)</div>
                        <dl class="gd-content-details-tags">
                            <dt> <span class="icomoon-price-tag"></span> @Html.Sitecore().Field("Glossary Value", ItemGuids.TagsItem):</dt>
                            <dd>
                                @Html.Sitecore().Rendering(ItemGuids.TagsRenderingViewGuid, new
                                        {
                                            Cacheable = false,
                                            CacheKey = "tags",
                                            Cache_VaryByData = true
                                        })
                            </dd>
                        </dl>
                            }
                        }
                    }
                    i++;
                        }
                        }
                    </div>
                }
            }
        }
    }
    @Html.Sitecore().Placeholder("t23-related")
</div>