@using Landmark.Classes
@using Landmark.Helper
@using Sitecore.Configuration
@using Sitecore.Data.Fields
@using Sitecore.Data.Items
@using Sitecore.Links
@model RenderingModel
@{
    var slideList = Model.Item.Children.ToList();
}
<section class="panel-area">
    <ul class="slider">
        @foreach (var item in slideList)
        {
            ReferenceField referenceField = (ReferenceField) item.Fields["Reference Item"];
            ReferenceField sublineVersionsField = (ReferenceField) item.Fields["Sub Version Slide Style"];
            if (referenceField != null && referenceField.TargetItem != null)
            {
                <li>
                    <div class="@LandmarkHelper.GetSlideClass(item) clearfix">
                        @if (string.IsNullOrEmpty(item.Fields["Slide Video"].Value))
                        {
                            <div class="panel-img" data-bg="@LandmarkHelper.GetCallOutImage(referenceField.TargetItem)"></div>
                        }
                        else
                        {
                            <div class="panel-img gd-lightbox-link gd-lightbox-video" data-bg="@LandmarkHelper.GetCallOutImage(referenceField.TargetItem)" data-lightsrc="@item.Fields["Slide Video"].Value" data-lighttitle="@referenceField.TargetItem.Fields["Article Headline"].Value" data-lightposter="@LandmarkHelper.ImageFieldSrc("Slide Video Poster",item)"></div>
                        }
                        
                        <div class="panel-main">
                            <div class="panel-text">
                                <hgroup class="clearfix">
                                    
                                        @if (sublineVersionsField.Value.Equals(ItemGuids.TwoNumbersTwoCaptionsTextLink))
                                        {
                                            @Html.Sitecore().Field("Article Headline 2", referenceField.TargetItem)
                                        }
                                        else
                                        {
                                            <h3>
                                            @Html.Sitecore().Field("Article Headline", referenceField.TargetItem)
                                                </h3>
                                        }
                                    
                                </hgroup>
                                <div class="panel-content">
                                    @Html.Sitecore().Field("Image Title", referenceField.TargetItem)
                                </div>
                                <a class="btn btn-default" href="@LandmarkHelper.TranslateUrl(LinkManager.GetItemUrl(referenceField.TargetItem))">@Html.Sitecore().Field("Glossary Value", (Item) Factory.GetDatabase("web").GetItem(ItemGuids.DiscoverLandmarkStoriesItem))</a>
                            </div>
                        </div>
                    </div>
                </li>
            }
            
        }
    </ul>

    <div class="scroll-area"> <a href="#"><span class="sprite-scroll"></span><br>
    <span class="hidden-xs">@Html.Sitecore().Field("Glossary Value", (Item) Factory.GetDatabase("web").GetItem(ItemGuids.ScrollToBeginGuidItem))</span> </a> </div>
    <div class="prev"> <a href="#"><span class="sprite-icon-l"></span></a> </div>
    <div class="next"> <a href="#"><span class="sprite-icon-r"></span></a> </div>
</section>