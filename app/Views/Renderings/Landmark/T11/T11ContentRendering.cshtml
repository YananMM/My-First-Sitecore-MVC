@using System.Diagnostics.Eventing.Reader
@using Landmark.Classes
@using Landmark.Helper
@using Sitecore.ContentSearch.Utilities
@using Sitecore.Data.Items
@using Sitecore.Links
@model RenderingModel

@{
    ShoppingHelper shoppingHelper = new ShoppingHelper();
}
<section class="page-title">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-8 col-xs-6">
                <h2>@Sitecore.Context.Item["Page Title"].ToUpper()</h2>
            </div>
            <div class="col-lg-4 col-md-4 col-xs-6 link-seeall">
                <a href="@LinkManager.GetItemUrl(Sitecore.Context.Database.GetItem(ItemGuids.AllByBrandsPage))">@Html.Sitecore().Field("Glossary Value", SitecoreItems.SeeAllBrandsGuidItem)<span class="icomoon-chevron-small-right"></span></a>
            </div>
        </div>
    </div>
</section>
<section class="content-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 page-menu">
                <ul class="clearfix">
                    @foreach (Item child in LandmarkHelper.GetChildrenPageInNavigation(Sitecore.Context.Item))
                    {
                        Item byBrands = (from item in child.Children where item.DisplayName.ToUpper() == SitecoreItems.ByBrandsGuidItem.DisplayName.ToUpper() select item).First();
                        <li><a href="@Sitecore.Links.LinkManager.GetItemUrl(byBrands)">@child["Page Title"].ToUpper()</a></li>
                    }
                </ul>
                <p>
                    @Html.Sitecore().Field("Glossary Value", SitecoreItems.AlsoInterestedInGuidItem) <br/>
                    @{
                        List<string> relatedCategorieIDs = shoppingHelper.GetRelatedCategoriesIDs();
                        var shoppingItems = LandmarkHelper.GetItemsByRootAndTemplate(ItemGuids.ShoppingItem, ItemGuids.T11PageTemplate);
                        foreach (var item in shoppingItems)
                        {
                            if (relatedCategorieIDs != null && relatedCategorieIDs.Count != 0)
                            {
                                foreach (var id in relatedCategorieIDs)
                                {
                                    var category = Sitecore.Context.Database.GetItem(id);
                                    if (category.DisplayName == item.DisplayName)
                                    {
                                        <a href="@Sitecore.Links.LinkManager.GetItemUrl(item)">@item.DisplayName</a>
                                    }
                                }
                            }
                        }
                    }
                </p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 menbox">
                <div class=" menbox-1">
                    <a href="#" class="menbox-img">
                        <div class="menbox-img-mask"></div>
                        @{
                            string src = Html.Sitecore().ImageFieldSrc("Banner Title Image", Sitecore.Context.Item);
                        }
                        <img data-src="@Html.Sitecore().ImageFieldSrc("Banner Image", Sitecore.Context.Item)" alt="landmark">
                        <div class="menbox-text">
                            @if (!string.IsNullOrEmpty(src))
                            {
                                <img data-src="@src" alt="landmark">
                            }
                            <p>@Html.Sitecore().Field("Banner Content", Sitecore.Context.Item)</p>
                        </div>
                    </a>
                </div>
            </div>

            <div class="col-lg-4 col-md-4 col-sm-4 menbox">
                @Html.Sitecore().Placeholder("t11-exclusive")
                <a href="@LinkManager.GetItemUrl(Sitecore.Context.Database.GetItem(ItemGuids.MonthlyExclusivePage))" class="pull-right menbox-more">@Html.Sitecore().Field("Glossary Value",SitecoreItems.SeeAllExclusive)<span class="icomoon-chevron-small-right"></span></a> </div>
            </div>
        </div>
    </div>
</section>
<section class="content-area content-area-bg">
<div class="container2">
    <div class="row">
@Html.Sitecore().Placeholder("t11-pulled-content")
    </div>
  </div>
</section>
