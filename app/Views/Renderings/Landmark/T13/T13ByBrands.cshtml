@using Landmark.Classes
@using Landmark.Helper
@using Landmark.Models
@using Sitecore.Configuration
@using Sitecore.Data
@using Sitecore.Data.Items
@model RenderingModel
<div class="masonry-area clearfix">
    <div class="brand-box-area">
        @{
            Item firstParentItem = Sitecore.Context.Item.Parent;
            List<LandmarkBrandModel> brandModels = LandmarkHelper.GetBrandModels();
            if (!firstParentItem.ID.ToString().Equals(ItemGuids.ShoppingItem))
            {
                var currentTag = LandmarkHelper.GetCurrentCategory();
                brandModels = brandModels.Where(p => p.Tags.Contains(currentTag)).ToList();
            }
            var brands = brandModels.GroupBy(p => p.Group).ToList();
        }
        @foreach (var items in brands)
        {
            <div class="brand-box brand-box-letter" id="a">@items.First().Group</div>
            foreach (var item in items)
            {
                <a class="brand-box" href="#" title="@item.BrandItem["Brand Title"]">
                    <img data-src="@Html.Sitecore().ImageFieldSrc("Brand Image", item.BrandItem)" alt="@Html.Sitecore().Field("Brand Title", item.BrandItem)">
                </a>
            }
        }
    </div>
</div>
